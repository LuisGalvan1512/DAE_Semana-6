{% extends 'quizzes/base.html' %}
{% block title %}Nuevo Quiz{% endblock %}

{% block content %}
<h1>Crear Quiz</h1>
<form id="quiz-form">
  <div class="mb-3">
    <label class="form-label">Título</label>
    <input type="text" class="form-control" id="title" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Descripción</label>
    <textarea class="form-control" id="description"></textarea>
  </div>
  <button type="submit" class="btn btn-success">Guardar</button>
</form>
{% endblock %}

{% block scripts %}
<script>
document.getElementById("quiz-form").addEventListener("submit", function(e) {
    e.preventDefault();
    fetch("/api/v1/quizzes/", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            title: document.getElementById("title").value,
            description: document.getElementById("description").value
        })
    })
    .then(r => r.json())
    .then(data => {
        alert("Quiz creado ✅");
        window.location.href = `/quiz/${data.id}/`;
    });
});
</script>
{% endblock %}
